{% extends "base.html" %}
{% load thumbnail %}
{% load manifest %}
{% block title %} {{ version.extension.name }} - GNOME Shell Extensions {% endblock %}
{% block body %}
{% with extension=version.extension %}
    <div class="extension"
         data-uuid="{{ extension.uuid }}"
         data-manifest="{% manifest_url version %}">
      <div class="button"></div>
      {% for screenshot in extension.screenshot_set.all %}
      {% thumbnail screenshot.image "300x200" as th %}
      <a href="{{ screenshot.image.url }}" class="screenshot featured"><img src="{{ th.url }}" /></a>
      {% endthumbnail %}
      {% endfor %}

      <h3> {{ extension.name }} </h3>
      <span class="author">by {{ extension.creator }}</span>
      <p class="description">
        {{ extension.description }}
      </p>

      <ul>
        {% if user == extension.creator %}
        <li><a href="{% url extensions-upload-file pk=extension.pk %}">Upload a new version</a></li>
        <li><a href="{% url extensions-upload-screenshot pk=extension.pk %}">Upload screenshot</a></li>
        {% endif %}
      </ul>
      <hr>
      {% include "extensions/comments.html" %}
</div>
{% endwith %}
{% endblock %}
{% block document-ready %}
    {{ block.super }}
    $("abbr.timestamp").timeago();
    $(".extension").buttonify();
    $(".comment .rating").each(function() {
      $(this).find('input').rating();
    });
    $("form .rating").rating();
{% endblock %}
